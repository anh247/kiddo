{% liquid
    assign sid = section.id
    assign content_width = section.settings.content_width
    assign container = section.settings.container
    assign space = section.settings.space
    assign title = section.settings.title
    assign title = section.settings.title
    assign product = section.settings.product
    assign excerpt_line = section.settings.excerpt_line
    assign handle_current = product.handle
    assign target = section.settings.target
    assign collection = section.settings.collection
    assign product_list = section.settings.product_list
    assign ratio = section.settings.ratio
    if ratio > 0
        assign aspect_ratio = ratio
    endif
%}

<section id="{{ sid }}" class="alz-product style-03 space-{{ space }}" style="{% if excerpt_line != blank %}--prd-excerpt-line:{{ excerpt_line }};{% endif %}">
    <div class="{{ content_width }}" style="{% if container != blank %}--container:{{ container }}{% endif %}">
        <div class="section-inner border-between">
            {% if product == blank %}
                {% assign product = '' %}
            {% endif %}
            {% if title != blank %}
                <h2 class="section-title"><span class="text">{{ title }}</span><span class="deco"></span></h2>
            {% endif %}
            <div class="product-main product-item">
                <div class="product-inner animate--slide-in" data-js-product>
                    <script class="data-json-product" type="application/json">{% render 'product-get-attributes', product: product, build_variant: 'json' %}</script>
                    <div class="product-thumb product-thumb-gallery js-product-images-navigation">
                        {% render 'product-get-image', product: product, aspect_ratio: aspect_ratio, show_gallery: true %}
                        {% render 'product-get-label', product: product %}
                    </div>
                    <div class="product-info skeleton-list tooltip-top">
                        {% render 'product-get-title', product: product %}
                        <div class="product-review">{{ settings.product_review_badge }}</div>
                        {% if product.metafields.custom.sold_ads != blank %}
                            <div class="sold-ads skeleton-item"><span class="icon lnr-power"></span>{{ product.metafields.custom.sold_ads }}</div>
                        {% endif %}
                        {% render 'product-get-excerpt', product: product %}
                        {% render 'product-get-countdown', product: product, text: section.settings.countdown_text %}
                        {% render 'product-get-price-single', product: product %}
                        {% render 'product-get-stock', product: product %}
                        {% render 'product-get-options', product: product %}
                        {% assign url_affiliate = product.metafields.custom.external_affiliate %}
                        {% if url_affiliate %}
                            <div data-product-meta class="product-btns">
                                <a href="{{ url_affiliate }}" rel="nofollow" target="_blank" class="btn product-affiliate relative skeleton-item">{{ section.settings.btn_affiliate }}</a>
                            </div>
                        {% else %}
                            <div data-product-meta class="product-btns">
                                {% render 'product-get-quantity', product: product %}
                                <button type="submit" class="button add-to-cart js_add_to_cart_button skeleton-item {% if product.selected_or_first_available_variant.available == false %}d-none-important{% endif %}"
                                        data-js-product-button-add-to-cart data-pid="{{ product.variants.first.id }}" {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}>
                                    <span class="circle-loading"></span>
                                    <span class="text">{{ 'products.product.add_to_cart' | t }}</span>
                                </button>
                                {% unless product == '' %}
                                    <a class="button add-to-cart js-btn-sold-out skeleton-item {% if product.selected_or_first_available_variant.available %}d-none-important{% endif %}" href="javascript:void(0)" data-js-product-button-sold-out>
                                        <span class="text">{{ 'products.product.sold_out' | t }}</span>
                                    </a>
                                {% endunless %}
                                <div class="product-btn tooltip-top skeleton-list">
                                    {% render 'product-get-button-wishlist', product: product %}
                                    {% render 'product-get-button-compare', product: product %}
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% if target == 'collection' %}
                {% assign products = collections[section.settings.collection].products %}
            {% elsif target == 'products' %}
                {% assign products = section.settings.product_list %}
            {% endif %}
            <div class="product-list flex-box">
                {% if products != blank %}
                    {% for product in products limit: 4 %}
                        {% if handle_current != product.handle %}
                            {% render 'product-style-02', product: product, aspect_ratio: aspect_ratio %}
                        {% endif %}
                    {% endfor %}
                {% else %}
                    {% for i in (1..4) %}
                        {% render 'product-style-02', product: '', aspect_ratio: aspect_ratio %}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</section>

{% render 'section_style' %}

{% schema %}
{
    "name": "Products 03",
    "class": "alz-section section-product animate--slide-in",
    "settings": [
        {
            "type": "number",
            "id": "z_index",
            "label": "Z-Index"
        },
        {
            "type": "select",
            "id": "hidden_mobile",
            "label": "Hide Section on mobile",
            "options": [
                {
                    "value": "",
                    "label": "No"
                },
                {
                    "value": "hide_1200",
                    "label": "(resolution < 1200px)"
                },
                {
                    "value": "hide_992",
                    "label": "(resolution < 992px)"
                },
                {
                    "value": "hide_768",
                    "label": "(resolution < 768px)"
                }
            ]
        },
        {
            "type": "select",
            "id": "content_width",
            "label": "Content width",
            "options": [
                {
                    "value": "container",
                    "label": "Container"
                },
                {
                    "value": "full-width",
                    "label": "Full Width"
                },
                {
                    "value": "full-width-pd",
                    "label": "Full Width no Padding"
                }
            ]
        },
        {
            "type": "text",
            "id": "container",
            "label": "Container width",
            "info": "Example: 1410px, 70%, 70vw"
        },
        {
            "type": "text",
            "id": "space",
            "label": "Space",
            "info": "Example:10,20,30,40,50,60,70,80,90,100"
        },
        {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "DAILY DEAL"
        },
        {
            "type": "header",
            "content": "== Main Product"
        },
        {
            "type": "product",
            "id": "product",
            "label": "Product"
        },
        {
            "type": "text",
            "id": "excerpt_line",
            "label": "Number of excerpt line",
            "default": "5"
        },
        {
            "type": "number",
            "id": "ratio",
            "label": "Image ratio",
            "info": "Ratio = width / height. Example: 1, 1.2, 0.8"
        },
        {
            "type": "text",
            "id": "btn_affiliate",
            "label": "Affiliate Button",
            "default": "Buy On Themeforest"
        },
        {
            "type": "header",
            "content": "== List Product (limit 4)"
        },
        {
            "type": "select",
            "id": "target",
            "label": "Target products",
            "options": [
                {
                    "value": "collection",
                    "label": "Collection"
                },
                {
                    "value": "products",
                    "label": "Product list"
                }
            ]
        },
        {
            "type": "collection",
            "id": "collection",
            "label": "Collection"
        },
        {
            "type": "product_list",
            "id": "product_list",
            "label": "Product list"
        },
        {
            "type": "text",
            "id": "countdown_text",
            "label": "Countdown Text",
            "default": "Hurry Up! Sale ends in:"
        },
        {
            "type": "header",
            "content": "== Section settings"
        },
        {
            "type": "checkbox",
            "id": "for_inner",
            "label": "Settings apply for inner"
        },
        {
            "type": "image_picker",
            "id": "bg_image",
            "label": "Background image"
        },
        {
            "type": "text",
            "id": "bg_position",
            "label": "Background position",
            "info": "Example: center/top/bottom center/left/right, 100% 100%, 100px 100px",
            "default": "center center"
        },
        {
            "type": "text",
            "id": "bg_size",
            "label": "Background size",
            "info": "Example: cover, contain, 100% 100%, 100px 100px",
            "default": "cover"
        },
        {
            "type": "text",
            "id": "bg_repeat",
            "label": "Background repeat",
            "info": "Example: no-repeat, repeat, repeat-x, repeat-y",
            "default": "no-repeat"
        },
        {
            "type": "checkbox",
            "id": "bg_fixed",
            "label": "Background fixed",
            "info": "For desktop (resolution > 1200px)"
        },
        {
            "type": "color_background",
            "id": "bg_gradient",
            "label": "Background gradient"
        },
        {
            "type": "color",
            "id": "bg_cl",
            "label": "Background color"
        },
        {
            "type": "color",
            "id": "main_cl",
            "label": "Main color"
        },
        {
            "type": "color",
            "id": "main_cl_t",
            "label": "Main color - text inside"
        },
        {
            "type": "color",
            "id": "dark_cl",
            "label": "Dark color"
        },
        {
            "type": "color",
            "id": "dark_cl_2",
            "label": "Dark color 2"
        },
        {
            "type": "color",
            "id": "dark_cl_3",
            "label": "Dark color 3"
        },
        {
            "type": "color",
            "id": "light_cl",
            "label": "Light color"
        },
        {
            "type": "color",
            "id": "light_cl_2",
            "label": "Light color 2"
        },
        {
            "type": "color",
            "id": "line_cl",
            "label": "Line color"
        },
        {
            "type": "text",
            "id": "fz",
            "label": "Font size",
            "info": "Example: 16px"
        },
        {
            "type": "text",
            "id": "lh",
            "label": "Line Height",
            "info": "Example: 24px, 1.4em"
        },
        {
            "type": "text",
            "id": "ls",
            "label": "Letter spacing",
            "info": "Example: 1px, 0.1em"
        },
        {
            "type": "text",
            "id": "fw",
            "label": "Font weight",
            "info": "Example: 100, 200, 300, 400, 500, 600, 700, 800"
        },
        {
            "type": "text",
            "id": "tt",
            "label": "Text transform",
            "info": "Example: none, uppercase, lowercase, capitalize"
        },
        {
            "type": "color",
            "id": "bd_color",
            "label": "Border color"
        },
        {
            "type": "text",
            "id": "bd_style",
            "label": "Border style",
            "info": "Example: solid, dotted, dashed, double, groove, ridge, outset"
        },
        {
            "type": "text",
            "id": "bd_width",
            "label": "Border width",
            "info": "Example: 1px, 1px 0, 1px 0 0 0"
        },
        {
            "type": "text",
            "id": "mg",
            "label": "Margin",
            "info": "Example: 10px, 10px 0, 10px 0 0 0"
        },
        {
            "type": "text",
            "id": "pd",
            "label": "Padding",
            "info": "Example: 10px, 10px 0, 10px 0 0 0"
        },
        {
            "type": "header",
            "content": "== Settings (resolution < 1200px)"
        },
        {
            "type": "text",
            "id": "bd_width_1200",
            "label": "Border width"
        },
        {
            "type": "text",
            "id": "mg_1200",
            "label": "Margin"
        },
        {
            "type": "text",
            "id": "pd_1200",
            "label": "Padding"
        },
        {
            "type": "header",
            "content": "== Settings (resolution < 992px)"
        },
        {
            "type": "text",
            "id": "bd_width_992",
            "label": "Border width"
        },
        {
            "type": "text",
            "id": "mg_992",
            "label": "Margin"
        },
        {
            "type": "text",
            "id": "pd_992",
            "label": "Padding"
        },
        {
            "type": "header",
            "content": "== Settings (resolution < 768px)"
        },
        {
            "type": "text",
            "id": "bd_width_768",
            "label": "Border width"
        },
        {
            "type": "text",
            "id": "mg_768",
            "label": "Margin"
        },
        {
            "type": "text",
            "id": "pd_768",
            "label": "Padding"
        }
    ],
    "presets": [
        {
            "name": "Product 03",
            "category": "Product"
        }
    ]
}
{% endschema %}
